# B树

B树是为磁盘或其他直接存取的辅助存储设备而设计的一种平衡搜索[树](树.md)。

[TOC]

## 定义

一颗B树是具有以下性质的有根树(根为$$T.root$$)：

1. 每个结点$$x$$有下面属性：
   1. $$x.n$$，当前存储在结点$$x$$中的关键字个数。
   2. $$x.n$$个关键字本身$$x.key_1,x.key_2,...,x.key_{x.n}$$，以非降序存放。
   3. $$x.leaf$$，一个$$bool$$值，如果$$x$$是叶节点，则为$$TRUE$$。
2. 每个内部结点$$x$$还包含$$x.n+1$$个指向孩子的指针$$x.c_1,x.c_2,...,x.c_{x.n+1}$$。叶节点没有孩子。
3. 关键字$$x.key_i$$对存储在各子树中的关键字范围进行分割，设$$k_i$$为任意存储在$$x.c_i$$为根的子树中的关键字，那么$$k_1\le x.key_1\le k_2\le ...\le x.key_{x.n}\le k_{x.n+1}$$
4. 每个叶结点具有相同的深度，即树的高度$$h$$。
5. 每个结点所包含的关键字个数有上界和下界，用一个被称为B树的最小度数的固定整数$$t\ge 2$$来表示这些界。
   1. 除了根节点以外的每个结点必须至少有$$t-1$$个关键字，因此除了根节点以外的每个内部结点至少有$$t$$个孩子，如果树非空，根节点至少有一个关键字。
   2. 每个结点至多可包含$$2t-1$$，因此一个内部结点至多$$2t$$个孩子，如果结点有$$2t-1$$个关键字，则称该结点是满的。

B树的操作需要访问硬盘，下面的实现中将B树整个保存在内存中，硬盘访问为空操作。