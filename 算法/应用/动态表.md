# 动态表

我们为一个表分配一定的内存空间，不够用的时候必须为其重新分配更大的空间，并将所有对象从原表中复制到新的空间中。如果从表中删除了很多对象，可能需要为其分配一个更小的内存空间。使用**摊还分析**证明，虽然插入和删除会引起扩张或收缩，有较高的实际代价，但它们的摊还代价都是$$O(1)$$。

### 分析方法

* [摊还分析](../算法与分析技术/摊还分析.md)

----

分配新表的一个启发式方法是：为新表分配2倍于旧表的槽。

接下来分析对一个空表执行$$n$$个插入操作的代价。使用**核算法**分析，对插入操作赋予3的摊还代价。多出的2代价作为元素的**信用**，1代价用于表扩张时移动这个元素，1代价用于移动原本就存在于表中没有信用的元素。所以总的代价为$$3n$$，总摊还代价为$$O(3n)$$，摊还代价为$$O(3)$$。

收缩表的方法是：当旧表的装载因子小于$$1/4$$时，收缩表。

同样可以证明，摊还代价为$$O(1)$$。

总之，由于每个操作的摊还代价的上界是一个常数，在一个动态表上执行$$n$$个操作的实际运行时间是$$O(n)$$。

